<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>CVSS Scanner</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            background-color: #f5f7fa;
        }

        .sidebar {
            height: 100vh;
            position: fixed;
            top: 0;
            left: 0;
            width: 230px;
            background-color: #343a40;
            color: white;
            padding-top: 30px;
        }

        .sidebar a {
            color: #fff;
            text-decoration: none;
            display: block;
            padding: 12px 20px;
            transition: background 0.3s;
        }

        .sidebar a:hover {
            background-color: #495057;
        }

        .main-content {
            margin-left: 230px;
            padding: 40px 30px;
        }

        .card {
            border-radius: 15px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
        }

        .badge {
            font-size: 0.9rem;
        }

        .chart-container {
            max-width: 500px;
            margin: auto;
        }
    </style>
</head>
<body>
<!-- Sidebar -->
<div class="sidebar">
    <h4 class="text-center mb-4">üõ°Ô∏è CVSS Tools</h4>
    <a href="/">üîç Scanner</a>
    <a href="/dashboard">üìä Dashboard</a>
</div>

<!-- Main Content -->
<div class="main-content">
    <h1 class="text-center mb-4">CVSS Scanner Dashboard</h1>

    <form method="post" class="mb-4">
        <div class="input-group">
            <input type="text" name="keyword" class="form-control" placeholder="Contoh: apache, mysql, windows" required>
            <button type="submit" class="btn btn-primary">Scan</button>
        </div>
    </form>

    {% if results %}
    <!-- Chart -->
    <div class="row mb-5 justify-content-center">
        <div class="col-md-6">
            <div class="card p-4 shadow-sm bg-white rounded-4">
                <h5 class="text-center mb-3 fw-bold">üìä Statistik CVSS Severity</h5>
                <div class="chart-container">
                    <canvas id="severityChart" height="320"></canvas>
                </div>
            </div>
        </div>
    </div>

    <!-- List CVEs -->
    <div class="list-group">
        {% for item in results %}
        <div class="list-group-item">
            <h5 class="mb-1">
                {{ item.cve_id }}
                <span class="badge
                        {% if item.severity == 'HIGH' %}bg-danger
                        {% elif item.severity == 'MEDIUM' %}bg-warning
                        {% elif item.severity == 'LOW' %}bg-success
                        {% else %}bg-secondary{% endif %}">
                        {{ item.severity }}
                    </span>
            </h5>
            <p class="mb-1">{{ item.description }}</p>
            <small><strong>Score:</strong> {{ item.score }}</small>
        </div>
        {% endfor %}
    </div>
    {% endif %}
</div>

<!-- Chart Script -->
{% if chart_data %}
<script>
    const ctx = document.getElementById('severityChart').getContext('2d');

    const severityChart = new Chart(ctx, {
        type: 'doughnut',
        data: {
            labels: {{ chart_data.keys() | list | tojson }},
            datasets: [{
                data: {{ chart_data.values() | list | tojson }},
                backgroundColor: [
                    'rgba(220, 53, 69, 0.7)',   // HIGH
                    'rgba(255, 193, 7, 0.7)',   // MEDIUM
                    'rgba(25, 135, 84, 0.7)',   // LOW
                    'rgba(108, 117, 125, 0.7)'  // UNKNOWN
                ],
                borderColor: [
                    'rgba(220, 53, 69, 1)',
                    'rgba(255, 193, 7, 1)',
                    'rgba(25, 135, 84, 1)',
                    'rgba(108, 117, 125, 1)'
                ],
                borderWidth: 2,
                hoverOffset: 15
            }]
        },
        options: {
            responsive: true,
            cutout: '60%',
            plugins: {
                legend: {
                    position: 'bottom',
                    labels: {
                        font: {
                            size: 14,
                            weight: 'bold'
                        },
                        color: '#333',
                        padding: 20
                    }
                },
                tooltip: {
                    backgroundColor: '#fff',
                    titleColor: '#000',
                    bodyColor: '#000',
                    borderColor: '#ccc',
                    borderWidth: 1,
                    padding: 10
                }
            }
        }
    });
</script>
{% endif %}
</body>
</html>

<!--Style 0-->
<!--<!DOCTYPE html>-->
<!--<html lang="en">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <title>CVSS Scanner Dashboard</title>-->
<!--    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">-->
<!--    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>-->
<!--    <style>-->
<!--        body {-->
<!--            background-color: #f5f7fa;-->
<!--        }-->

<!--        .card {-->
<!--            border-radius: 15px;-->
<!--            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);-->
<!--        }-->

<!--        .badge {-->
<!--            font-size: 0.9rem;-->
<!--        }-->

<!--        .chart-container {-->
<!--            position: relative;-->
<!--            margin: auto;-->
<!--            width: 100%;-->
<!--            max-width: 400px;-->
<!--        }-->

<!--        h1, h5 {-->
<!--            font-weight: 600;-->
<!--        }-->
<!--    </style>-->
<!--</head>-->
<!--<body>-->
<!--<div class="container py-5">-->
<!--    <h1 class="text-center mb-4">üîç CVSS Scanner Dashboard</h1>-->

<!--    &lt;!&ndash; Form Input &ndash;&gt;-->
<!--    <form method="post" class="mb-4">-->
<!--        <div class="input-group">-->
<!--            <input type="text" name="keyword" class="form-control" placeholder="Contoh: apache, mysql, windows" required>-->
<!--            <button type="submit" class="btn btn-primary">Scan</button>-->
<!--        </div>-->
<!--    </form>-->

<!--    {% if results %}-->
<!--    &lt;!&ndash; Chart Doughnut &ndash;&gt;-->
<!--    <div class="row mb-5 justify-content-center">-->
<!--        <div class="col-md-6">-->
<!--            <div class="card p-4 shadow-sm bg-white rounded-4">-->
<!--                <h5 class="text-center mb-3 fw-bold">üìä Statistik CVSS Severity</h5>-->
<!--                <div class="chart-container">-->
<!--                    <canvas id="severityChart" height="320"></canvas>-->
<!--                </div>-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->

<!--    &lt;!&ndash; Daftar CVE &ndash;&gt;-->
<!--    <div class="list-group">-->
<!--        {% for item in results %}-->
<!--        <div class="list-group-item">-->
<!--            <h5 class="mb-1">-->
<!--                {{ item.cve_id }}-->
<!--                <span class="badge-->
<!--                        {% if item.severity == 'HIGH' %}bg-danger-->
<!--                        {% elif item.severity == 'MEDIUM' %}bg-warning-->
<!--                        {% elif item.severity == 'LOW' %}bg-success-->
<!--                        {% else %}bg-secondary{% endif %}">-->
<!--                        {{ item.severity }}-->
<!--                    </span>-->
<!--            </h5>-->
<!--            <p class="mb-1">{{ item.description }}</p>-->
<!--            <small><strong>Score:</strong> {{ item.score }}</small>-->
<!--        </div>-->
<!--        {% endfor %}-->
<!--    </div>-->
<!--    {% endif %}-->
<!--</div>-->

<!--&lt;!&ndash; Chart Script &ndash;&gt;-->
<!--{% if chart_data %}-->
<!--<script>-->
<!--    const ctx = document.getElementById('severityChart').getContext('2d');-->

<!--    const severityChart = new Chart(ctx, {-->
<!--        type: 'doughnut',-->
<!--        data: {-->
<!--            labels: {{ chart_data.keys() | list | tojson }},-->
<!--            datasets: [{-->
<!--                data: {{ chart_data.values() | list | tojson }},-->
<!--                backgroundColor: [-->
<!--                    'rgba(220, 53, 69, 0.7)',   // HIGH-->
<!--                    'rgba(255, 193, 7, 0.7)',   // MEDIUM-->
<!--                    'rgba(25, 135, 84, 0.7)',   // LOW-->
<!--                    'rgba(108, 117, 125, 0.7)'  // UNKNOWN-->
<!--                ],-->
<!--                borderColor: [-->
<!--                    'rgba(220, 53, 69, 1)',-->
<!--                    'rgba(255, 193, 7, 1)',-->
<!--                    'rgba(25, 135, 84, 1)',-->
<!--                    'rgba(108, 117, 125, 1)'-->
<!--                ],-->
<!--                borderWidth: 2,-->
<!--                hoverOffset: 15-->
<!--            }]-->
<!--        },-->
<!--        options: {-->
<!--            responsive: true,-->
<!--            cutout: '60%',-->
<!--            plugins: {-->
<!--                legend: {-->
<!--                    position: 'bottom',-->
<!--                    labels: {-->
<!--                        font: {-->
<!--                            size: 14,-->
<!--                            weight: 'bold'-->
<!--                        },-->
<!--                        color: '#333',-->
<!--                        padding: 20-->
<!--                    }-->
<!--                },-->
<!--                tooltip: {-->
<!--                    backgroundColor: '#fff',-->
<!--                    titleColor: '#000',-->
<!--                    bodyColor: '#000',-->
<!--                    borderColor: '#ccc',-->
<!--                    borderWidth: 1,-->
<!--                    padding: 10-->
<!--                }-->
<!--            }-->
<!--        }-->
<!--    });-->
<!--</script>-->
<!--{% endif %}-->
<!--</body>-->
<!--</html>-->

<!--Type 1-->
<!--<!DOCTYPE html>-->
<!--<html lang="en">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <title>CVSS Scanner</title>-->
<!--    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">-->
<!--    <style>-->
<!--        body {-->
<!--            background-color: #f8f9fa;-->
<!--        }-->
<!--        .badge {-->
<!--            font-size: 0.9rem;-->
<!--        }-->
<!--    </style>-->
<!--</head>-->
<!--<body>-->
<!--<div class="container py-5">-->
<!--    <h1 class="text-center mb-4">üîç CVSS Scanner</h1>-->
<!--    <form method="post" class="mb-4">-->
<!--        <div class="input-group">-->
<!--            <input type="text" name="keyword" class="form-control" placeholder="Masukkan nama software, contoh: apache" required>-->
<!--            <button type="submit" class="btn btn-primary">Scan</button>-->
<!--        </div>-->
<!--    </form>-->

<!--    {% if results %}-->
<!--    <div class="list-group">-->
<!--        {% for item in results %}-->
<!--        <div class="list-group-item">-->
<!--            <h5 class="mb-1">-->
<!--                {{ item.cve_id }}-->
<!--                <span class="badge-->
<!--                        {% if item.severity == 'HIGH' %}bg-danger-->
<!--                        {% elif item.severity == 'MEDIUM' %}bg-warning-->
<!--                        {% elif item.severity == 'LOW' %}bg-success-->
<!--                        {% else %}bg-secondary{% endif %}">-->
<!--                        {{ item.severity }}-->
<!--                    </span>-->
<!--            </h5>-->
<!--            <p class="mb-1">{{ item.description }}</p>-->
<!--            <small><strong>Score:</strong> {{ item.score }}</small>-->
<!--        </div>-->
<!--        {% endfor %}-->
<!--    </div>-->
<!--    {% endif %}-->
<!--</div>-->
<!--</body>-->
<!--</html>-->

<!--Mode 2-->
<!--<!DOCTYPE html>-->
<!--<html lang="en">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <title>CVSS Scanner</title>-->
<!--    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">-->
<!--    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>-->
<!--    <style>-->
<!--        body {-->
<!--            background-color: #f5f7fa;-->
<!--        }-->
<!--        .card {-->
<!--            border-radius: 15px;-->
<!--            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);-->
<!--        }-->
<!--        .badge {-->
<!--            font-size: 0.9rem;-->
<!--        }-->
<!--    </style>-->
<!--</head>-->
<!--<body>-->
<!--<div class="container py-5">-->
<!--    <h1 class="text-center mb-4">üîç CVSS Scanner Dashboard</h1>-->

<!--    <form method="post" class="mb-4">-->
<!--        <div class="input-group">-->
<!--            <input type="text" name="keyword" class="form-control" placeholder="Contoh: apache, mysql, windows" required>-->
<!--            <button type="submit" class="btn btn-primary">Scan</button>-->
<!--        </div>-->
<!--    </form>-->

<!--    {% if results %}-->
<!--    <div class="row mb-5">-->
<!--        <div class="col-md-6">-->
<!--            <div class="card p-3">-->
<!--                <h5>Statistik CVSS Severity</h5>-->
<!--                <canvas id="severityChart" height="300"></canvas>-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->

<!--    <div class="list-group">-->
<!--        {% for item in results %}-->
<!--        <div class="list-group-item">-->
<!--            <h5 class="mb-1">-->
<!--                {{ item.cve_id }}-->
<!--                <span class="badge-->
<!--                    {% if item.severity == 'HIGH' %}bg-danger-->
<!--                    {% elif item.severity == 'MEDIUM' %}bg-warning-->
<!--                    {% elif item.severity == 'LOW' %}bg-success-->
<!--                    {% else %}bg-secondary{% endif %}">-->
<!--                    {{ item.severity }}-->
<!--                </span>-->
<!--            </h5>-->
<!--            <p class="mb-1">{{ item.description }}</p>-->
<!--            <small><strong>Score:</strong> {{ item.score }}</small>-->
<!--        </div>-->
<!--        {% endfor %}-->
<!--    </div>-->
<!--    {% endif %}-->
<!--</div>-->

<!--{% if chart_data %}-->
<!--<script>-->
<!--    const ctx = document.getElementById('severityChart').getContext('2d');-->
<!--    const severityChart = new Chart(ctx, {-->
<!--        type: 'pie',-->
<!--        data: {-->
<!--            labels: {{ chart_data.keys() | list | tojson }},-->
<!--            datasets: [{-->
<!--                data: {{ chart_data.values() | list | tojson }},-->
<!--                backgroundColor: ['#dc3545', '#ffc107', '#198754', '#6c757d'],-->
<!--                borderWidth: 1-->
<!--            }]-->
<!--        },-->
<!--        options: {-->
<!--            responsive: true,-->
<!--            plugins: {-->
<!--                legend: {-->
<!--                    position: 'bottom'-->
<!--                }-->
<!--            }-->
<!--        }-->
<!--    });-->
<!--</script>-->
<!--{% endif %}-->

<!--</body>-->
<!--</html>-->

